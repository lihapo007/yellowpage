<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>DeepSeek AI èŠå¤©ï¼ˆå•æ–‡ä»¶ç‰ˆï¼‰</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 40px auto; }
    textarea { width: 100%; height: 80px; }
    button { margin-top: 10px; padding: 8px 16px; }
    #reply { white-space: pre-wrap; background: #f4f4f4; padding: 10px; margin-top: 20px; border-radius: 8px; }
    #key { width: 100%; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h2>ğŸ”® DeepSeek èŠå¤©ï¼ˆå•æ–‡ä»¶ï¼‰</h2>

  <!-- è®©ä½ åœ¨é¡µé¢è¾“å…¥ API Keyï¼Œé¿å…ç¡¬ç¼–ç åœ¨æ–‡ä»¶é‡Œ -->
  <input id="key" type="password" placeholder="è¯·è¾“å…¥ä½ çš„ DeepSeek API Key" />

  <textarea id="message" placeholder="è¾“å…¥ä½ çš„é—®é¢˜..."></textarea>
  <br>
  <button onclick="send()">å‘é€</button>
  <div id="reply"></div>

  <!-- ç”¨ CDN å¼•å…¥ axiosï¼Œæ— éœ€å®‰è£…ä»»ä½•åŒ… -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    async function send() {
      const API_KEY = document.getElementById('key').value.trim();
      if (!API_KEY) {
        alert('è¯·å…ˆè¾“å…¥ä½ çš„ API Key');
        return;
      }

      const msg = document.getElementById('message').value.trim();
      if (!msg) {
        alert('è¯·è¾“å…¥é—®é¢˜åå†å‘é€');
        return;
      }

      const replyDiv = document.getElementById('reply');
      replyDiv.innerText = 'ğŸ¤– AI æ­£åœ¨æ€è€ƒ...';

      try {
        const res = await axios.post(
                    '/api/chat',
                    { message: msg }
          {
            model: "deepseek-chat",
            messages: [
              { role: "system", content: "ä½ æ˜¯ä¸€ä¸ªèªæ˜ã€æ¸©æŸ”ä¸”ä¸“ä¸šçš„ AI åŠ©æ‰‹ã€‚" },
              { role: "user", content: msg }
            ]
          },
          {
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${API_KEY}`
            }
          }
        );

        replyDiv.innerText = res.data.choices[0].message.content;
      } catch (err) {
        console.error(err);
        replyDiv.innerText = 'âŒ è¯·æ±‚å‡ºé”™ï¼Œè¯·æ£€æŸ¥æ§åˆ¶å°ä¿¡æ¯';
      }
    }
  </script>
</body>
</html>
