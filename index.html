<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>DeepSeek AI 聊天（单文件版）</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 40px auto; }
    textarea { width: 100%; height: 80px; }
    button { margin-top: 10px; padding: 8px 16px; }
    #reply { white-space: pre-wrap; background: #f4f4f4; padding: 10px; margin-top: 20px; border-radius: 8px; }
    #key { width: 100%; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h2>🔮 DeepSeek 聊天（单文件）</h2>

  <!-- 让你在页面输入 API Key，避免硬编码在文件里 -->
  <input id="key" type="password" placeholder="请输入你的 DeepSeek API Key" />

  <textarea id="message" placeholder="输入你的问题..."></textarea>
  <br>
  <button onclick="send()">发送</button>
  <div id="reply"></div>

  <!-- 用 CDN 引入 axios，无需安装任何包 -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  async function send() {
    const msg = document.getElementById('message').value.trim();
    document.getElementById('reply').innerText = '🤖 AI 正在思考...';

    try {
      const res = await axios.post(
        '/.netlify/functions/chat',    // ← 调用这里
        { message: msg }
      );
      document.getElementById('reply').innerText = res.data.reply;
    } catch (err) {
      console.error(err);
      document.getElementById('reply').innerText = '❌ 请求出错，请检查控制台';
    }
  }
</script>
</body>
</html>
